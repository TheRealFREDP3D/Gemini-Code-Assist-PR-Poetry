![Poem Collector](https://img.shields.io/badge/PR%20Poetry-LLM%20Generated-blueviolet)
![Auto-updated](https://img.shields.io/badge/auto--update-enabled-brightgreen)
![Gemini Model](https://img.shields.io/badge/model-gemini%201.5%20flash-orange)


# 🌸 Gemini Code Assist PR Poetry

> _“It’s like a tiny flower growing on a big pile of snips.”_  

---

## 🎧 Listen to the Story Behind the Project

[→ Lissten to the Deep Dive Podcast](https://youtu.be/XEh26jsH-2g?si=yVaqn5TcBZhUaVzZ)

---

## 🌟 What Is This?

When a Pull Request is created on GitHub, the **Gemini Code Assist** app analyzes the PR and posts a detailed AI-generated review comment.

But at the end of that report, tucked away after all the technical feedback, comes a surprise:

> ✍️ **A poem.**  
> Inspired by the PR’s changes, generated by the LLM as part of the response.

Weird... 

Sometimes, strange is good.
Sometimes, strange is beautiful.

This project collects those poetic snippets, ephemeral and buried, and gives them a proper home.

---

## 🚀 TL;DR Quick Start

```bash
# Clone the project
git clone https://github.com/TheRealFREDP3D/Gemini-Code-Assist-PR-Poetry
cd Gemini-Code-Assist-PR-Poetry

# Install dependencies
pip install -r requirements.txt

# Run the interactive wizard
python get_new_flowers.py -w
````

> 📖 Your poems will appear in:
>
> * `gem-flowers.md` (human-readable)
> * `gem-flowers.json` (machine-readable)

---

## 📚 Why Save These Poems?

> Because even code reviews deserve a little soul.

Gemini’s LLM occasionally adds short poetic flourishes when summarizing a PR. These poems are generated contextually from the PR’s title, description, and diff.

They're easy to miss. The BardBot often hides his prose at the bottom of automated comments.
This repo preserves them in a growing open collection.

---

## 🪴 Contributing

Have you seen a poetic PR comment?

1. Add it manually to `gem-flowers.md` and `gem-flowers.json`, or
2. Use the collection script to discover and log them.

Let’s surface these little moments of AI weirdness from the GitHub void and into the light.

---

## 🛠️ Usage

### Auto-Collection from GitHub PRs

```bash
# Install dependencies
pip install requests gitpython tqdm litellm python-dotenv

# Linux/macOS
./run.sh

# Windows
run.bat

# Or use Python directly
python get_new_flowers.py --model="gemini/gemini-1.5-flash"
```

### Advanced Commands

```bash
# Scan a specific repository
python get_new_flowers.py --owner="username" --repo="repository"

# Limit to N pull requests
python get_new_flowers.py --max-prs=20

# Search across GitHub
python get_new_flowers.py --search --max-repos=10

# Use Ollama local models
python get_new_flowers.py --ollama

# Use interactive wizard
python get_new_flowers.py --wizard
```

---

## ⚙️ Configuration

Create a `.env` file in the root directory:

```env
GITHUB_TOKEN=your_github_token
GEMINI_API_KEY=your_gemini_api_key

# Optional:
# MODEL=gemini/gemini-1.5-flash
# LITELLM_LOGGING=True
# LITELLM_LOG=DEBUG
```

---

## 🔍 Features

* ✅ Automatically detects AI-generated poems in PR comments
* ✅ Works across public and private GitHub repositories
* ✅ Uses Gemini, Ollama, OpenAI, or custom LLMs
* ✅ Handles rate limits and falls back to alternate models
* ✅ Logs all results and errors
* ✅ Outputs in Markdown and JSON
* ✅ Avoids duplicates
* ✅ Includes metadata (repo, PR, model used)

---

## 📁 Project Structure

```
gemini-code-poetry/
├── get_new_flowers.py       # Main poem collector
├── cleanup_poems.py         # Removes duplicates, sorts poems
├── gem-flowers.md           # Pretty poem archive
├── gem-flowers.json         # Structured archive
├── src/
│   ├── config.py
│   ├── error_handler.py
│   ├── logger.py
│   └── llm_client_template.py
├── llm_client/              # Model implementations
├── utils/
│   └── PullPal              # PR scraping utilities
├── tests/
├── docs/
│   ├── overview-basic.jpg
│   └── overview-full.jpg
├── run.sh                   # Unix run script
├── run.bat                  # Windows run script
├── .env.example
└── CHANGELOG.md
```

---

## 📊 Visual Overview

> *Generated using CodeViz for VSCode*

![Overview Basic](docs/overview-basic.jpg)
![Overview Full](docs/overview-full.jpg)

---

## 🧠 Learning Resources

* [Gemini Code Assist](https://cloud.google.com/duet-ai/docs/code-assist-overview)
* [LiteLLM for API Management](https://docs.litellm.ai/)
* [GitHub REST API](https://docs.github.com/en/rest)
* [How LLMs Write Poetry (Paper)](https://arxiv.org/abs/2306.16413)

---

## 🔄 Versioning

See [CHANGELOG.md](./CHANGELOG.md)

---

## 🌐 Related Projects

* [Sourcery](https://sourcery.ai/)
* [Ollama](https://ollama.com/)
* [Google Gemini](https://deepmind.google/technologies/gemini/)

---

## ✨ Final Thought

> “The world is made of code — but sometimes it rhymes.”
